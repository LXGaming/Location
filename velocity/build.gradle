plugins {
    id "com.github.johnrengelman.shadow"
}

archivesBaseName = "location-velocity"

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(11)
    }
}

configurations {
}

repositories {
}

dependencies {
    implementation(project(path: ":location-common")) {
        exclude(module: "adventure-api")
        exclude(module: "adventure-text-serializer-legacy")
        exclude(module: "brigadier")
        exclude(module: "checker-qual")
        exclude(module: "gson")
        exclude(module: "guava")
        exclude(module: "netty-all")
        exclude(module: "slf4j-api")
    }
    compileOnly(fileTree(dir: "libs", include: ["*.jar"]))
    annotationProcessor("com.velocitypowered:velocity-api:${velocityVersion}")
    compileOnly("com.velocitypowered:velocity-api:${velocityVersion}")
}

build {
    dependsOn("signJar")
}

compileJava {
    dependsOn(":location-common:build")
}

jar {
    enabled = false
    dependsOn("shadowJar")
}

shadowJar {
    archiveClassifier.set(null)
}